{ 
    "AWSTemplateFormatVersion":"2010-09-09",
    "Description":"Cloudformation Template To Create VPC with Eight Subnets",
    "Parameters":{ 
       "NameTag":{ 
          "Description":"The Name Tag used for the resources to be created.",
          "Type":"String",
          "Default":"DKW"
       },
       "Environment":{ 
          "Description":"The Environment Type",
          "Type":"String",
          "Default":"DEV"
       },
       "AZ1":{ 
          "Type":"AWS::EC2::AvailabilityZone::Name"
       },
       "AZ2":{ 
          "Type":"AWS::EC2::AvailabilityZone::Name"
       }
    },
    "Resources":{ 
       "VPC":{ 
          "Type":"AWS::EC2::VPC",
          "Properties":{ 
             "CidrBlock":"10.0.0.0/16",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-VPC"
                   }
                }
             ]
          }
       },
       "InternetGateway":{ 
          "Type":"AWS::EC2::InternetGateway",
          "Properties":{ 
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-IGW"
                   }
                }
             ]
          }
       },
       "InternetGatewayAttachment":{ 
          "Type":"AWS::EC2::VPCGatewayAttachment",
          "Properties":{ 
             "InternetGatewayId":{ 
                "Ref":"InternetGateway"
             },
             "VpcId":{ 
                "Ref":"VPC"
             }
          }
       },
       "PublicSubnet1":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ1"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.0.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-AWS-PUB-A01"
                   }
                }
             ]
          }
       },
       "PublicSubnet2":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ2"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.1.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-AWS-PUB-B01"
                   }
                }
             ]
          }
       },
       "PublicSubnet3":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ1"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.2.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-APP-PUB-A01"
                   }
                }
             ]
          }
       },
       "PublicSubnet4":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ2"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.3.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-APP-PUB-B01"
                   }
                }
             ]
          }
       },
       "PrivateSubnet1":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ1"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.4.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-AWS-PRV-A01"
                   }
                }
             ]
          }
       },
       "PrivateSubnet2":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ2"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.5.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-AWS-PRV-B01"
                   }
                }
             ]
          }
       },
       "PrivateSubnet3":{s
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ1"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.6.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-DATA-PRV-A01"
                   }
                }
             ]
          }
       },
       "PrivateSubnet4":{ 
          "Type":"AWS::EC2::Subnet",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "AvailabilityZone":{ 
                "Ref":"AZ2"
             },
             "MapPublicIpOnLaunch":true,
             "CidrBlock":"10.0.7.0/24",
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-DATA-PRV-B01"
                   }
                }
             ]
          }
       },
       "PublicRouteTable":{ 
          "Type":"AWS::EC2::RouteTable",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-PUB-RT"
                   }
                }
             ]
          }
       },
       "DefaultRoute":{ 
          "Type":"AWS::EC2::Route",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PublicRouteTable"
             },
             "DestinationCidrBlock":"0.0.0.0/0",
             "GatewayId":{ 
                "Ref":"InternetGateway"
             }
          }
       },
       "PublicSubnet1RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PublicRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PublicSubnet1"
             }
          }
       },
       "PublicSubnet2RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PublicRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PublicSubnet2"
             }
          }
       },
       "PublicSubnet3RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PublicRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PublicSubnet3"
             }
          }
       },
       "PublicSubnet4RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PublicRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PublicSubnet4"
             }
          }
       },
       "PrivateRouteTable":{ 
          "Type":"AWS::EC2::RouteTable",
          "Properties":{ 
             "VpcId":{ 
                "Ref":"VPC"
             },
             "Tags":[ 
                { 
                   "Key":"Name",
                   "Value":{ 
                      "Fn::Sub":"${NameTag}-${Environment}-PRV-RT"
                   }
                }
             ]
          }
       },
       "PrivateSubnet1RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PrivateRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PrivateSubnet1"
             }
          }
       },
       "PrivateSubnet2RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PrivateRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PrivateSubnet2"
             }
          }
       },
       "PrivateSubnet3RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PrivateRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PrivateSubnet3"
             }
          }
       },
       "PrivateSubnet4RouteTableAssociation":{ 
          "Type":"AWS::EC2::SubnetRouteTableAssociation",
          "Properties":{ 
             "RouteTableId":{ 
                "Ref":"PrivateRouteTable"
             },
             "SubnetId":{ 
                "Ref":"PrivateSubnet4"
             }
          }
       }
    },
    "Outputs":{ 
       "PublicSubnet1":{ 
          "Value":{ 
             "Ref":"PublicSubnet1"
          }
       },
       "PublicSubnet2":{ 
          "Value":{ 
             "Ref":"PublicSubnet2"
          }
       },
       "PublicSubnet3":{ 
          "Value":{ 
             "Ref":"PublicSubnet3"
          }
       },
       "PublicSubnet4":{ 
          "Value":{ 
             "Ref":"PublicSubnet4"
          }
       },
       "PrivateSubnet1":{ 
          "Value":{ 
             "Ref":"PrivateSubnet1"
          }
       },
       "PrivateSubnet2":{ 
          "Value":{ 
             "Ref":"PrivateSubnet2"
          }
       },
       "PrivateSubnet3":{ 
          "Value":{ 
             "Ref":"PrivateSubnet3"
          }
       },
       "PrivateSubnet4":{ 
          "Value":{ 
             "Ref":"PrivateSubnet4"
          }
       },
       "VpcId":{ 
          "Value":{ 
             "Ref":"VPC"
          }
       }
    }
 }